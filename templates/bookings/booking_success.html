{% load static %}
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Confirmación de reserva</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    body { background:#F5F6F7; display:flex; align-items:center; justify-content:center; min-height:100vh; }
    .ticket {
      max-width:420px; background:white; border-radius:20px; box-shadow:0 4px 12px rgba(0,0,0,.1);
      overflow:hidden; position:relative; padding:2rem; text-align:center;
    }
    .ticket::before, .ticket::after {
      content:""; position:absolute; width:20px; height:20px; background:#F5F6F7; border-radius:50%;
      top:50%; transform:translateY(-50%);
    }
    .ticket::before { left:-10px; } .ticket::after { right:-10px; }
    h2 { color:#005098; margin-bottom:.25rem; }
    .qr { margin:1rem auto; }
    .code { font-family:monospace; letter-spacing:1px; background:#E5F1FB; border-radius:6px; padding:.5rem 1rem; display:inline-block; }
    .btn-wallet { background:#005098; color:white; border:none; }
    .btn-wallet:hover { background:#003f7a; }
  </style>
</head>
<body>
  <div class="ticket">
    <h2>{{ booking.event.title }}</h2>
    <p class="text-muted mb-3">{{ booking.event.start|date:"d M Y, H:i" }}</p>

    <div class="qr">
      <img src="https://api.qrserver.com/v1/create-qr-code/?size=160x160&data={{ booking.confirmation_code }}"
           alt="QR de confirmación" class="img-fluid rounded">
    </div>

    <p><strong>Reservado por:</strong><br>{{ booking.name }}</p>
    <p><strong>Teléfono:</strong> {{ booking.phone }}</p>
    <p><strong>Email:</strong> {{ booking.email }}</p>
    <p class="mt-3"><strong>Código de confirmación:</strong></p>
    <div class="code">{{ booking.confirmation_code }}</div>

    <div class="mt-4 d-grid gap-2">
      <a href="{% url 'bookings:event_list' %}" class="btn btn-outline-secondary"><i class="bi bi-arrow-left"></i> Volver</a>

      <!-- Simulación wallet -->
      <button class="btn btn-wallet"><i class="bi bi-wallet2"></i> Agregar a Wallet (iOS)</button>
      <button class="btn btn-dark"><i class="bi bi-google"></i> Agregar a Google Wallet</button>

      <button onclick="window.print()" class="btn btn-outline-primary"><i class="bi bi-printer"></i> Imprimir / Descargar</button>
    </div>
  </div>
</body>
</html>
